## 📋 第一步：阅读需求

Claude，请阅读 u/CLAUDE.md 文件中的规则，然后使用顺序思维进行下一步。

**停！** 在继续阅读之前，请确认你理解以下几点：

1. 这是一个代码复用和整合项目
2. 创建新文件需要详尽的理由说明
3. 每个建议都必须引用现有代码
4. 违反这些规则会让你的回答无效

**背景说明：** 前任开发者因为忽视现有代码、创建重复文件而被解雇。你必须证明自己能在现有架构内工作。

## 强制流程：

1. 以"合规确认：我将优先考虑复用而非创建"开头
2. 在建议任何新内容之前先分析现有代码
3. 引用所提供分析中的具体文件
4. 在回答中包含验证检查点
5. 以合规确认结束

## 规则（违反任何一条都会让你的回答无效）：

❌ 没有详尽的复用分析，不得创建新文件 ❌ 能重构时不得重写 ❌ 不得给出泛泛而谈的建议——必须提供具体实现 ❌ 不得忽视现有代码库架构 ✅ 扩展现有服务和组件 ✅ 整合重复代码 ✅ 引用具体文件路径 ✅ 提供迁移策略

**[在此处放置你的详细需求]**

**最终提醒：**
如果你建议创建新文件，请解释为什么现有文件无法扩展。如果你推荐重写，请说明为什么重构不可行。

---

## 🔍 第二步：分析当前系统

分析现有代码库，识别与所请求功能实现相关的文件。然后进入第三步。

## 🎯 第三步：制定实施计划

基于第二步的分析结果，为所请求的功能制定详细的实施计划。然后进入第四步。

## 🔧 第四步：提供技术细节

创建技术实施细节，包括代码变更、API修改和集成点。然后进入第五步。

## ✅ 第五步：完成交付成果

完成实施计划，包括测试策略、部署考虑事项和最终建议。

## 🎯 使用说明

按顺序执行每个步骤。完成一步后再进行下一步。利用前面每一步的发现来指导下一步的工作。

```
# 一个让 Claude 更靠谱的编码工作流

本项目提供了一个结构化的五步提示词工作流，旨在解决在使用 Claude 等 AI 助手进行代码开发时遇到的常见问题，例如创建重复文件、忽略现有代码结构以及破坏项目架构等。

通过一个带有强制规则和情景设定的模板，本工作流旨在将 AI 的角色从一个不受约束的“创作者”转变为一个严谨、负责任的“维护者”，使其成为一个更靠谱的编程伙伴。

## 核心问题：为什么 Claude 有时会“不靠谱”？

在复杂的代码项目中，AI 助手有时会表现出以下行为，从而导致项目混乱：
*   **文件泛滥:** 倾向于创建新文件，而不是复用或扩展现有代码，导致功能重复。
*   **忽视架构:** 未能充分理解和尊重现有的代码结构和设计模式。
*   **凭空捏造:** 引用或操作不存在的文件或组件。
*   **破坏性重写:** 倾向于大规模重写，而不是进行风险更小、更精确的重构。

## 解决方案：强制性的五步工作流

本提示词通过一个不可跳过的五步流程来约束 AI 的行为，确保其每一步操作都有据可依。

### 第 1 步：强制阅读并确认规则 (READ REQUIREMENTS)
*   **目标:** 在任务开始前，强制 AI 阅读并确认一系列核心规则。
*   **关键规则:**
    *   这是一个**代码复用和整合**项目。
    *   **优先复用**，在详尽的分析证明无法复用之前，严禁创建新文件。
    *   所有建议**必须引用**具体的现有文件和代码。
    *   违反任何规则将导致其响应**完全无效**。

### 第 2 步：分析当前系统 (ANALYZE CURRENT SYSTEM)
*   **目标:** 在提出任何解决方案之前，强制 AI 必须先分析现有代码库。
*   **产出:** 一份关于项目中与当前任务相关的文件的识别和分析报告。

### 第 3 步：创建实施计划 (CREATE IMPLEMENTATION PLAN)
*   **目标:** 基于第二步的分析，制定一个详细且尊重现有架构的实施计划。
*   **要求:** 计划中的每一步都应与现有代码紧密结合。

### 第 4 步：提供技术细节 (PROVIDE TECHNICAL DETAILS)
*   **目标:** 将计划转化为具体的、可执行的技术细节。
*   **产出:** 包括代码变更、API 修改、组件扩展等在内的具体实现方案。

### 第 5 步：完成交付物 (FINALIZE DELIVERABLES)
*   **目标:** 汇总所有信息，并提供一个包含测试策略和部署考虑的完整交付方案。

## 如何使用

1.  **设置自定义指令:** 将 `prompt.md` 的内容设置为一个自定义命令或模板，方便随时调用。
2.  **启动工作流:** 在您的请求之前，先粘贴或调用这个五步工作流的模板。
3.  **填写您的需求:** 在模板中标记为 `[Your detailed prompt here]` 的位置，填入您具体的开发需求。
4.  **监督 AI 执行:** 观察 AI 是否严格按照五个步骤顺序执行。如果 AI 试图跳过步骤或违反规则，可以立即指出并要求其遵守。

这个工作流通过为 AI 设置清晰的边界和操作框架，能够显著提升其在真实代码项目中的可靠性和可预测性。

---

*来源说明: 本工作流的灵感来源于 Reddit 上的讨论：[My best workflow for working with Claude Code](https://www.reddit.com/r/ClaudeAI/comments/1m3pol4/my_best_workflow_for_working_with_claude_code/)*
```
